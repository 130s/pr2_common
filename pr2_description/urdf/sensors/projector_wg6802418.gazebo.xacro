<?xml version="1.0"?>
<root xmlns:sensor="http://playerstage.sourceforge.net/gazebo/xmlschema/#sensor"
      xmlns:controller="http://playerstage.sourceforge.net/gazebo/xmlschema/#controller"
      xmlns:interface="http://playerstage.sourceforge.net/gazebo/xmlschema/#interface"
      xmlns:xacro="http://ros.org/wiki/xacro">
  
<!-- this controller is pushed into a body scope (previously model scope)
     this will only work with added r36415 patch in simulator_gazebo stack
     otherwise projector will not work without removing the reference tag -->
<xacro:macro name="projector_wg6802418_gazebo_v0" params="name">
  <gazebo>
    <controller:gazebo_ros_projector name="${name}_controller" plugin="libgazebo_ros_projector.so">
        <alwaysOn>true</alwaysOn>
        <updateRate>15.0</updateRate>
        <textureName>stereo_projection_pattern_high_res_red.png</textureName>
        <bodyName>${name}_child_frame</bodyName>
        <filterTextureName>stereo_projection_pattern_filter.png</filterTextureName>        
        <textureTopicName>${name}_controller/image</textureTopicName>
        <projectorTopicName>${name}_controller/projector</projectorTopicName>        
        <fov>${55.0/180.0*M_PI}</fov>
        <nearClipDist>0.1</nearClipDist>
        <farClipDist>10</farClipDist>
    </controller:gazebo_ros_projector>
  </gazebo>

</xacro:macro>

</root>
